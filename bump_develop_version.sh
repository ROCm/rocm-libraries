#!/bin/bash

# for the develop branch this script bumps the Tensile version and hash and the rocBLAS version

OLD_TENSILE_VERSION="TENSILE_VERSION 4.43.0"
NEW_TENSILE_VERSION="TENSILE_VERSION 4.44.0"

OLD_TENSILE_HASH="a544a93867733afa2d32674bd29ba7bc6d7a3122"
NEW_TENSILE_HASH="a164ed70df55ceb076f4a1f2fa2ea11f0f1384cc"

OLD_ROCBLAS_VERSION="4.5.0"
NEW_ROCBLAS_VERSION="4.6.0"

OLD_SO_VERSION="rocblas_SOVERSION 4.5"
NEW_SO_VERSION="rocblas_SOVERSION 4.6"

OLD_HIPBLASLT_VERSION="HIPBLASLT_VERSION 0.10"
NEW_HIPBLASLT_VERSION="HIPBLASLT_VERSION 0.13"

sed -i "s/${OLD_TENSILE_VERSION}/${NEW_TENSILE_VERSION}/g" CMakeLists.txt

sed -i "s/${OLD_TENSILE_HASH}/${NEW_TENSILE_HASH}/g" tensile_tag.txt

sed -i "s/${OLD_ROCBLAS_VERSION}/${NEW_ROCBLAS_VERSION}/g" CMakeLists.txt

sed -i "s/${OLD_SO_VERSION}/${NEW_SO_VERSION}/g" library/CMakeLists.txt

sed -i "s/${OLD_HIPBLASLT_VERSION}/${NEW_HIPBLASLT_VERSION}/g" CMakeLists.txt
